

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Building a plot class &mdash; sisl |release| documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="API documentation" href="../../../api.html" />
    <link rel="prev" title="Intro to multiple plots" href="../combining-plots/Intro%20to%20multiple%20plots.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> sisl
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../other.html">Other resources</a></li>
</ul>
<p class="caption"><span class="caption-text">Publications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../cite.html">Citing sisl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications.html">Publications using sisl</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/scripts.html">Command line scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst/files.html">File formats</a></li>
</ul>
<p class="caption"><span class="caption-text">Toolboxes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../toolbox.html">Toolboxes</a></li>
</ul>
<p class="caption"><span class="caption-text">Visualization</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ase/index.html">ASE</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Plotly</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-tutorials">Basic Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#showcase-of-plot-classes">Showcase of plot classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#combining-plots">Combining plots</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#do-it-yourself">Do it yourself</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Building a plot class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Class-definition">Class definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Flow-methods">Flow methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Accessing-settings">Accessing settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Additional-public-methods">Additional public methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">sisl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Plotly</a> &raquo;</li>
        
      <li>Building a plot class</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/visualization/plotly/diy/Building a plot class.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div align="right">
Download IPython notebook <a href="https://raw.githubusercontent.com/zerothi/sisl/master/docs/visualization/plotly/diy/Building a plot class.ipynb"> here</a>.
<span style="white-space: nowrap;"><a href="https://mybinder.org/v2/gh/zerothi/sisl/master?filepath=docs/visualization/plotly/diy/Building a plot class.ipynb"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg" style="vertical-align:text-bottom"></a>.</span>
</div><div class="section" id="Building-a-plot-class">
<h1>Building a plot class<a class="headerlink" href="#Building-a-plot-class" title="Permalink to this headline">¶</a></h1>
<p><strong>Following this guide</strong>, you will not only <strong>build a very flexible plot class</strong> that you will be able to use in a wide range of cases, but also your class will be automatically recognized by the <a class="reference external" href="https://github.com/pfebrer96/sislGUIpublic">graphical interface</a>. Therefore, <strong>you will get visual interactivity for free</strong>.</p>
<div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle">Warning</p>
<p>Please make sure to read <a class="reference external" href="../00-Intro.html">this brief introduction to sisl’s visualization framework</a> before you go on with this notebook. It will only take a few minutes and you will understand the concepts much easier! :)</p>
</div>
<p>Let’s begin!</p>
<div class="section" id="Class-definition">
<h2>Class definition<a class="headerlink" href="#Class-definition" title="Permalink to this headline">¶</a></h2>
<p><em>Things that don’t start in the right way are not likely to end well.</em></p>
<p>Therefore, make sure that <strong>all plot classes that you develop inherit from the parent class ``Plot``</strong>.</p>
<p>That is, if you were to define a new class to plot, let’s say, the happiness you feel for having found this notebook, you would define it as <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">HappinessPlot(Plot):</span></code>.</p>
<p>In this way, your plots will profit from all the generic methods and processes that are implemented there. The <code class="docutils literal notranslate"><span class="pre">Plot</span></code> class is meant for you to write as little code as possible while still getting a powerful and dynamic representation.</p>
<p>More info on class inheritance: <a class="reference external" href="https://www.w3schools.com/python/python_inheritance.asp">written explanation</a>, <a class="reference external" href="https://www.youtube.com/watch?v=Cn7AkDb4pIU">Youtube video</a>.</p>
<p><em>Let’s do it!</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sisl.viz</span> <span class="kn">import</span> <span class="n">Plot</span>

<span class="k">class</span> <span class="nc">HappinessPlot</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
info:0: SislInfo: Please install tqdm (pip install tqdm) for better looking progress bars
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-b6d33d5fe0a5&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> sisl<span class="ansi-blue-fg">.</span>viz <span class="ansi-green-fg">import</span> Plot
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-green-fg">class</span> HappinessPlot<span class="ansi-blue-fg">(</span>Plot<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     <span class="ansi-green-fg">pass</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/__init__.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span>
<span class="ansi-green-intense-fg ansi-bold">     19</span> <span class="ansi-red-fg"># Import everything from the plotly submodule</span>
<span class="ansi-green-fg">---&gt; 20</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotly <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotly <span class="ansi-green-fg">import</span> plotutils
<span class="ansi-green-intense-fg ansi-bold">     22</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/__init__.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     25</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_user_customs <span class="ansi-green-fg">import</span> import_user_plots<span class="ansi-blue-fg">,</span> import_user_presets<span class="ansi-blue-fg">,</span> import_user_sessions<span class="ansi-blue-fg">,</span> import_user_plugins
<span class="ansi-green-intense-fg ansi-bold">     26</span>
<span class="ansi-green-fg">---&gt; 27</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plot <span class="ansi-green-fg">import</span> Plot<span class="ansi-blue-fg">,</span> Animation<span class="ansi-blue-fg">,</span> MultiplePlot<span class="ansi-blue-fg">,</span> SubPlots
<span class="ansi-green-intense-fg ansi-bold">     28</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plots <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">     29</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>session <span class="ansi-green-fg">import</span> Session

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/plot.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span> <span class="ansi-green-fg">import</span> sisl
<span class="ansi-green-intense-fg ansi-bold">     22</span>
<span class="ansi-green-fg">---&gt; 23</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>configurable <span class="ansi-green-fg">import</span> Configurable<span class="ansi-blue-fg">,</span> ConfigurableMeta<span class="ansi-blue-fg">,</span> vizplotly_settings<span class="ansi-blue-fg">,</span> _populate_with_settings
<span class="ansi-green-intense-fg ansi-bold">     24</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_presets <span class="ansi-green-fg">import</span> get_preset
<span class="ansi-green-intense-fg ansi-bold">     25</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotutils <span class="ansi-green-fg">import</span> init_multiple_plots<span class="ansi-blue-fg">,</span> repeat_if_childs<span class="ansi-blue-fg">,</span> dictOfLists2listOfDicts<span class="ansi-blue-fg">,</span> trigger_notification<span class="ansi-blue-fg">,</span><span class="ansi-red-fg"> </span><span class="ansi-red-fg">\</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/configurable.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span class="ansi-green-fg">from</span> sisl<span class="ansi-blue-fg">.</span>_dispatcher <span class="ansi-green-fg">import</span> AbstractDispatch
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_presets <span class="ansi-green-fg">import</span> get_preset
<span class="ansi-green-fg">---&gt; 13</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotutils <span class="ansi-green-fg">import</span> get_configurable_docstring<span class="ansi-blue-fg">,</span> get_configurable_kwargs<span class="ansi-blue-fg">,</span> get_configurable_kwargs_to_pass
<span class="ansi-green-intense-fg ansi-bold">     14</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> __all__ <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#34;Configurable&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;vizplotly_settings&#34;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/plotutils.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span> <span class="ansi-green-fg">import</span> itertools
<span class="ansi-green-intense-fg ansi-bold">      9</span> <span class="ansi-green-fg">from</span> pathos<span class="ansi-blue-fg">.</span>pools <span class="ansi-green-fg">import</span> ProcessPool <span class="ansi-green-fg">as</span> Pool
<span class="ansi-green-fg">---&gt; 10</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">import</span> tqdm
<span class="ansi-green-intense-fg ansi-bold">     11</span>
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-green-fg">from</span> copy <span class="ansi-green-fg">import</span> deepcopy

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named &#39;tqdm&#39;
</pre></div></div>
</div>
<p><em>And just like that, you have your first plot class. Let’s play with it:</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span> <span class="o">=</span> <span class="n">HappinessPlot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-297b57f94834&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>plt <span class="ansi-blue-fg">=</span> HappinessPlot<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;HappinessPlot&#39; is not defined
</pre></div></div>
</div>
<p><em>Well, that seems reasonable. Our plot has no data because our class does not know how to get it yet.</em></p>
<p><em>However, we can already do all the general things a plot is expected to do:</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">plt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-b76d6ef2345b&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>print<span class="ansi-blue-fg">(</span>plt<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;plt&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-cd653b2c8062&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>plt

<span class="ansi-red-fg">NameError</span>: name &#39;plt&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">xaxis_title</span> <span class="o">=</span> <span class="s2">&quot;Meaningless axis (eV)&quot;</span><span class="p">,</span>
                  <span class="n">xaxis_showgrid</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">xaxis_gridcolor</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-656d867d533a&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> plt.update_layout(xaxis_title = &#34;Meaningless axis (eV)&#34;,
</span><span class="ansi-green-intense-fg ansi-bold">      2</span>                   xaxis_showgrid = True, xaxis_gridcolor = &#34;red&#34;)

<span class="ansi-red-fg">NameError</span>: name &#39;plt&#39; is not defined
</pre></div></div>
</div>
<p><em>If you are done generating and playing with useless plot classes, let’s continue our way to usefulness…</em></p>
</div>
<div class="section" id="Parameters">
<h2>Parameters<a class="headerlink" href="#Parameters" title="Permalink to this headline">¶</a></h2>
<p><em>It is only when you define something that it begins to exist.</em></p>
<p>Before starting to write methods for our new class, we will <strong>write the parameters that define it</strong>. We will store them in a <strong>class variable</strong> called <code class="docutils literal notranslate"><span class="pre">_parameters</span></code>. Here is the definition of the <code class="docutils literal notranslate"><span class="pre">_parameters</span></code> variable that your class should contain:</p>
<p><code class="docutils literal notranslate"><span class="pre">_parameters</span></code> (tuple of InputFields): it contains all the parameters that the user can tweak in your analysis. Each parameter or setting should use an input field object (see the cell below to see types of input fields that you can use). Why do we need to do it like this? Well, this has three main purposes:</p>
<ul class="simple">
<li><p>If you use an input field, the graphical interface already knows how to display it.</p></li>
<li><p>It will make documentation very consistent in the long term.</p></li>
<li><p>You will be able to access their values very easily at any point in the plot’s methods.</p></li>
<li><p>Helpful methods can be implemented to input fields to facilitate some recurrent work on the inputs.</p></li>
</ul>
<p><em>Let’s begin populating our HappinessPlot class:</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># These are some input fields that are available to you.</span>
<span class="c1"># The names are quite self-explanatory</span>
<span class="kn">from</span> <span class="nn">sisl.viz.plotly.input_fields</span> <span class="kn">import</span> <span class="n">TextInput</span><span class="p">,</span> <span class="n">SwitchInput</span><span class="p">,</span> \
    <span class="n">ColorPicker</span><span class="p">,</span> <span class="n">DropdownInput</span><span class="p">,</span> <span class="n">IntegerInput</span><span class="p">,</span> <span class="n">FloatInput</span><span class="p">,</span> \
    <span class="n">RangeSlider</span><span class="p">,</span> <span class="n">QueriesInput</span><span class="p">,</span> <span class="n">ProgramaticInput</span>

<span class="k">class</span> <span class="nc">HappinessPlot</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>

    <span class="c1"># The _plot_type variable is the name that will be displayed for the plot</span>
    <span class="c1"># If not present, it will be the class name (HappinessPlot).</span>
    <span class="n">_plot_type</span> <span class="o">=</span> <span class="s2">&quot;Happiness Plot&quot;</span>

    <span class="n">_parameters</span> <span class="o">=</span> <span class="p">(</span>

        <span class="c1"># This is our first parameter</span>
        <span class="n">FloatInput</span><span class="p">(</span>
            <span class="c1"># &quot;key&quot; will allow you to identify the parameter during your data processing</span>
            <span class="c1"># (be patient, we are getting there)</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;init_happiness&quot;</span><span class="p">,</span>
            <span class="c1"># &quot;name&quot; is the name that will be displayed (because, you know,</span>
            <span class="c1"># init_happiness is not a beautiful name to show to non-programmers)</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Initial happiness level&quot;</span><span class="p">,</span>
            <span class="c1"># &quot;default&quot; is the default value for the parameter</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="c1"># &quot;help&quot; is a helper message that will be displayed to the user when</span>
            <span class="c1"># they don&#39;t know what the parameter means. It will also be used in</span>
            <span class="c1"># the automated docs of the plot class.</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;This is your level of happiness before reading this notebook.&quot;</span><span class="p">,</span>
        <span class="p">),</span>

        <span class="c1"># This is our second parameter</span>
        <span class="n">SwitchInput</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;read_notebook&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Notebook has been read?&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Whether you have read the DIY notebook yet.&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-f5b9e4bf9284&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-red-fg"># These are some input fields that are available to you.</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-red-fg"># The names are quite self-explanatory</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> sisl<span class="ansi-blue-fg">.</span>viz<span class="ansi-blue-fg">.</span>plotly<span class="ansi-blue-fg">.</span>input_fields <span class="ansi-green-fg">import</span> TextInput<span class="ansi-blue-fg">,</span> SwitchInput<span class="ansi-blue-fg">,</span><span class="ansi-red-fg"> </span><span class="ansi-red-fg">\</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     ColorPicker<span class="ansi-blue-fg">,</span> DropdownInput<span class="ansi-blue-fg">,</span> IntegerInput<span class="ansi-blue-fg">,</span> FloatInput<span class="ansi-blue-fg">,</span><span class="ansi-red-fg"> </span><span class="ansi-red-fg">\</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     RangeSlider<span class="ansi-blue-fg">,</span> QueriesInput<span class="ansi-blue-fg">,</span> ProgramaticInput

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/__init__.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span>
<span class="ansi-green-intense-fg ansi-bold">     19</span> <span class="ansi-red-fg"># Import everything from the plotly submodule</span>
<span class="ansi-green-fg">---&gt; 20</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotly <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotly <span class="ansi-green-fg">import</span> plotutils
<span class="ansi-green-intense-fg ansi-bold">     22</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/__init__.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     25</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_user_customs <span class="ansi-green-fg">import</span> import_user_plots<span class="ansi-blue-fg">,</span> import_user_presets<span class="ansi-blue-fg">,</span> import_user_sessions<span class="ansi-blue-fg">,</span> import_user_plugins
<span class="ansi-green-intense-fg ansi-bold">     26</span>
<span class="ansi-green-fg">---&gt; 27</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plot <span class="ansi-green-fg">import</span> Plot<span class="ansi-blue-fg">,</span> Animation<span class="ansi-blue-fg">,</span> MultiplePlot<span class="ansi-blue-fg">,</span> SubPlots
<span class="ansi-green-intense-fg ansi-bold">     28</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plots <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">     29</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>session <span class="ansi-green-fg">import</span> Session

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/plot.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span> <span class="ansi-green-fg">import</span> sisl
<span class="ansi-green-intense-fg ansi-bold">     22</span>
<span class="ansi-green-fg">---&gt; 23</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>configurable <span class="ansi-green-fg">import</span> Configurable<span class="ansi-blue-fg">,</span> ConfigurableMeta<span class="ansi-blue-fg">,</span> vizplotly_settings<span class="ansi-blue-fg">,</span> _populate_with_settings
<span class="ansi-green-intense-fg ansi-bold">     24</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_presets <span class="ansi-green-fg">import</span> get_preset
<span class="ansi-green-intense-fg ansi-bold">     25</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotutils <span class="ansi-green-fg">import</span> init_multiple_plots<span class="ansi-blue-fg">,</span> repeat_if_childs<span class="ansi-blue-fg">,</span> dictOfLists2listOfDicts<span class="ansi-blue-fg">,</span> trigger_notification<span class="ansi-blue-fg">,</span><span class="ansi-red-fg"> </span><span class="ansi-red-fg">\</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/configurable.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span class="ansi-green-fg">from</span> sisl<span class="ansi-blue-fg">.</span>_dispatcher <span class="ansi-green-fg">import</span> AbstractDispatch
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_presets <span class="ansi-green-fg">import</span> get_preset
<span class="ansi-green-fg">---&gt; 13</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotutils <span class="ansi-green-fg">import</span> get_configurable_docstring<span class="ansi-blue-fg">,</span> get_configurable_kwargs<span class="ansi-blue-fg">,</span> get_configurable_kwargs_to_pass
<span class="ansi-green-intense-fg ansi-bold">     14</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> __all__ <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#34;Configurable&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;vizplotly_settings&#34;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/plotutils.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span> <span class="ansi-green-fg">import</span> itertools
<span class="ansi-green-intense-fg ansi-bold">      9</span> <span class="ansi-green-fg">from</span> pathos<span class="ansi-blue-fg">.</span>pools <span class="ansi-green-fg">import</span> ProcessPool <span class="ansi-green-fg">as</span> Pool
<span class="ansi-green-fg">---&gt; 10</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">import</span> tqdm
<span class="ansi-green-intense-fg ansi-bold">     11</span>
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-green-fg">from</span> copy <span class="ansi-green-fg">import</span> deepcopy

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named &#39;tqdm&#39;
</pre></div></div>
</div>
<p><em>Now we have something! Let’s check if it works:</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span> <span class="o">=</span> <span class="n">HappinessPlot</span><span class="p">(</span> <span class="n">init_happiness</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-2118785f1edb&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>plt <span class="ansi-blue-fg">=</span> HappinessPlot<span class="ansi-blue-fg">(</span> init_happiness <span class="ansi-blue-fg">=</span> <span class="ansi-cyan-fg">3</span> <span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;HappinessPlot&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">plt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-b76d6ef2345b&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>print<span class="ansi-blue-fg">(</span>plt<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;plt&#39; is not defined
</pre></div></div>
</div>
<p><em>You can see that our settings have appeared, but they are still meaningless, let’s continue.</em></p>
</div>
<div class="section" id="Flow-methods">
<h2>Flow methods<a class="headerlink" href="#Flow-methods" title="Permalink to this headline">¶</a></h2>
<p><em>Is this class just a poser or does it actually do something?</em></p>
<p>After defining the parameters that our analysis will depend on and that the user will be able to tweak, we can proceed to actually using them to <strong>read, process and show data</strong>.</p>
<p>As mentioned in the <a class="reference external" href="../00-Intro.html">introductory page</a>, the <code class="docutils literal notranslate"><span class="pre">Plot</span></code> class will control the flow of our plot and will be in charge of managing how it needs to behave at each situation. Because <code class="docutils literal notranslate"><span class="pre">Plot</span></code> is an experienced class that has seen many child classes fail, it knows all the things that can go wrong and what is the best way to do things. Therefore, <strong>all the methods called by the user</strong> will actually be <strong>methods of</strong> <code class="docutils literal notranslate"><span class="pre">Plot</span></code>, not our class.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>Don’t worry, this is just true for the main plotting flow! Besides that, <strong>you can add as much public methods as you wish</strong> to make the usage of your class much more convenient.</p>
</div>
<p>However, <code class="docutils literal notranslate"><span class="pre">Plot</span></code> is of course not omniscient, so it needs the help of your class to do the particular analysis that you need. During the workflow, <strong>there are many points where Plot will try to use methods of your class</strong>, and that is where you can do the processing required for your plots. At first, this might seem annoying and limiting, but the flexibility provided is very high and in this way you can be 100% sure that your code is ran in the right moments without having to think much about
it.</p>
<p>The flow of the <code class="docutils literal notranslate"><span class="pre">Plot</span></code> class is quite simple. There are three main steps represented by three different methods: <code class="docutils literal notranslate"><span class="pre">read_data</span></code>, <code class="docutils literal notranslate"><span class="pre">set_data</span></code> and <code class="docutils literal notranslate"><span class="pre">get_figure</span></code>. The names can already give you a first idea of what each step does, but let’s get to the details of each method and show you where you will be able to do your magic:</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>Following, you will find advice of what to do at each point of the workflow. But really, do whatever you need to do, don’t feel limited by our advice!</p>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.__init__()</span></code>, <em>the party starter</em>:</p>
<p>Of course, before ever thinking of doing things with your plot, we need to initialize it. On initialization, your plot will inherit everything from the parent classes, and all the parameters under the <code class="docutils literal notranslate"><span class="pre">_parameters</span></code> variable (both in your class and in <code class="docutils literal notranslate"><span class="pre">Plot</span></code>) will be transferred to <code class="docutils literal notranslate"><span class="pre">self.settings</span></code>, a dictionary that will contain all the current values for each parameter. You will also get a full copy of <code class="docutils literal notranslate"><span class="pre">_parameters</span></code> under <code class="docutils literal notranslate"><span class="pre">self.params</span></code>, in case you need to check something at any
point.</p>
<div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle">Warning</p>
<p>Please <strong>don’t ever use ``_parameters``</strong> directly, as you would have the risk of <strong>changing the parameters for the whole class</strong>, not only your plot.</p>
</div>
<p>You should let <code class="docutils literal notranslate"><span class="pre">Plot.__init__()</span></code> do its thing, but after it is done, you have the first place where you can act. If your class has an <code class="docutils literal notranslate"><span class="pre">_after_init</span></code> method, it will be ran at this point. This is a good place to intialize your plot attributes if you are a clean coder and don’t initialize attributes all over the place. But hey, we don’t judge!</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.read_data()</span></code>, <em>the heavy lifter</em>:</p>
<p>This method will probably be <strong>the most time and resource consuming</strong> of your class, therefore we need to make sure that we <strong>store all the important things inside our object</strong> so that we don’t have to use it frequently, only if there is a change in the reading method or the files that must be read.</p>
<p>Our advice is that, at the end of this method, you end up with a <a class="reference external" href="https://www.learnpython.org/en/Pandas%20Basics">pandas dataframe</a>, <a class="reference external" href="http://xarray.pydata.org/en/stable/">xarray Dataarray or Dataset</a> or whatever other <strong>ordered way</strong> to store the data, so that later operations that need to be run more frequently and will query bits of this data can be performed in a quick and efficient manner.</p>
<p><code class="docutils literal notranslate"><span class="pre">read_data</span></code> is a polite method, so it will let you do something first if you need to by using the <code class="docutils literal notranslate"><span class="pre">_before_read</span></code> method. We have not thinked of something that would be good to do here yet, but you may need it, so there you have it…</p>
<p>After that, it will attempt to <strong>initialize the plot from the different entry points</strong> until it finds one that succeeds. Entry points are signalled with the <code class="docutils literal notranslate"><span class="pre">entry_point</span></code> wrapper, as follows:</p>
</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sisl.viz.plotly.plot</span> <span class="kn">import</span> <span class="n">entry_point</span>

<span class="k">class</span> <span class="nc">HappinessPlot</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>

    <span class="nd">@entry_point</span><span class="p">(</span><span class="s2">&quot;my first entry point&quot;</span><span class="p">)</span> <span class="c1"># This is the name of the entry point</span>
    <span class="k">def</span> <span class="nf">_just_continue</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Some docs for the entry point&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-5c4dcca898c9&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> sisl<span class="ansi-blue-fg">.</span>viz<span class="ansi-blue-fg">.</span>plotly<span class="ansi-blue-fg">.</span>plot <span class="ansi-green-fg">import</span> entry_point
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-green-fg">class</span> HappinessPlot<span class="ansi-blue-fg">(</span>Plot<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-blue-fg">@</span>entry_point<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;my first entry point&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-red-fg"># This is the name of the entry point</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/__init__.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span>
<span class="ansi-green-intense-fg ansi-bold">     19</span> <span class="ansi-red-fg"># Import everything from the plotly submodule</span>
<span class="ansi-green-fg">---&gt; 20</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotly <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotly <span class="ansi-green-fg">import</span> plotutils
<span class="ansi-green-intense-fg ansi-bold">     22</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/__init__.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     25</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_user_customs <span class="ansi-green-fg">import</span> import_user_plots<span class="ansi-blue-fg">,</span> import_user_presets<span class="ansi-blue-fg">,</span> import_user_sessions<span class="ansi-blue-fg">,</span> import_user_plugins
<span class="ansi-green-intense-fg ansi-bold">     26</span>
<span class="ansi-green-fg">---&gt; 27</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plot <span class="ansi-green-fg">import</span> Plot<span class="ansi-blue-fg">,</span> Animation<span class="ansi-blue-fg">,</span> MultiplePlot<span class="ansi-blue-fg">,</span> SubPlots
<span class="ansi-green-intense-fg ansi-bold">     28</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plots <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">     29</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>session <span class="ansi-green-fg">import</span> Session

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/plot.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span> <span class="ansi-green-fg">import</span> sisl
<span class="ansi-green-intense-fg ansi-bold">     22</span>
<span class="ansi-green-fg">---&gt; 23</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>configurable <span class="ansi-green-fg">import</span> Configurable<span class="ansi-blue-fg">,</span> ConfigurableMeta<span class="ansi-blue-fg">,</span> vizplotly_settings<span class="ansi-blue-fg">,</span> _populate_with_settings
<span class="ansi-green-intense-fg ansi-bold">     24</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_presets <span class="ansi-green-fg">import</span> get_preset
<span class="ansi-green-intense-fg ansi-bold">     25</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotutils <span class="ansi-green-fg">import</span> init_multiple_plots<span class="ansi-blue-fg">,</span> repeat_if_childs<span class="ansi-blue-fg">,</span> dictOfLists2listOfDicts<span class="ansi-blue-fg">,</span> trigger_notification<span class="ansi-blue-fg">,</span><span class="ansi-red-fg"> </span><span class="ansi-red-fg">\</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/configurable.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span class="ansi-green-fg">from</span> sisl<span class="ansi-blue-fg">.</span>_dispatcher <span class="ansi-green-fg">import</span> AbstractDispatch
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>_presets <span class="ansi-green-fg">import</span> get_preset
<span class="ansi-green-fg">---&gt; 13</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> <span class="ansi-blue-fg">.</span>plotutils <span class="ansi-green-fg">import</span> get_configurable_docstring<span class="ansi-blue-fg">,</span> get_configurable_kwargs<span class="ansi-blue-fg">,</span> get_configurable_kwargs_to_pass
<span class="ansi-green-intense-fg ansi-bold">     14</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> __all__ <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#34;Configurable&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;vizplotly_settings&#34;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">/opt/hostedtoolcache/Python/3.6.12/x64/lib/python3.6/site-packages/sisl/viz/plotly/plotutils.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span> <span class="ansi-green-fg">import</span> itertools
<span class="ansi-green-intense-fg ansi-bold">      9</span> <span class="ansi-green-fg">from</span> pathos<span class="ansi-blue-fg">.</span>pools <span class="ansi-green-fg">import</span> ProcessPool <span class="ansi-green-fg">as</span> Pool
<span class="ansi-green-fg">---&gt; 10</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">import</span> tqdm
<span class="ansi-green-intense-fg ansi-bold">     11</span>
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-green-fg">from</span> copy <span class="ansi-green-fg">import</span> deepcopy

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named &#39;tqdm&#39;
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>The order in which <code class="docutils literal notranslate"><span class="pre">read_data</span></code> goes through entry points is the same in which you have defined them.</p>
</div>
<p>When an entry point succeeds (that is, ends without raising an exception), you will get the source of the data under <code class="docutils literal notranslate"><span class="pre">self.source</span></code> for if you need to know it further down in your processing. Then <code class="docutils literal notranslate"><span class="pre">Plot</span></code> will let you have one last word with the <code class="docutils literal notranslate"><span class="pre">_after_read</span></code> method, before moving on to the next step. This is a good point to update <code class="docutils literal notranslate"><span class="pre">self.params</span></code> or <code class="docutils literal notranslate"><span class="pre">self.settings</span></code> <strong>according to the data you have read</strong>. For instance, in a PDOS plot the orbitals, atomic species and atoms available are
only known after you have read the data, so you will use <code class="docutils literal notranslate"><span class="pre">_after_read</span></code> to set the options of the corresponding input fields.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.set_data()</span></code>, <em>the picky one</em>:</p>
<p>Great! You have all the data in the world now stored in your plot object, but you sure enough don’t want to plot it all. And even if you did, you probably don’t want to display just all the numbers on the screen. In this step you should pick the data that you need from <code class="docutils literal notranslate"><span class="pre">self.df</span></code> (or whatever place you have stored your data), and organize it in plot elements (i.e. lines, scatter points, bars, pies…).</p>
<p>In this method, you should end up populating the plot with all traces that are related to the data. Keep in mind that our plot is an extension of plotly’s <code class="docutils literal notranslate"><span class="pre">Figure</span></code>, so you can use any of the methods they provide to add data. The most common ones are <code class="docutils literal notranslate"><span class="pre">self.add_trace()</span></code> and <code class="docutils literal notranslate"><span class="pre">self.add_traces()</span></code>, but they have plenty of them, so you can check <a class="reference external" href="https://plotly.com/python/">their documentation</a>.</p>
<p>You are kind of alone in this step, as <code class="docutils literal notranslate"><span class="pre">Plot</span></code> will only ensure that the basics are there and execute your <code class="docutils literal notranslate"><span class="pre">_set_data()</span></code> method. By the way, you don’t need to worry about cleaning previous data. Each time <code class="docutils literal notranslate"><span class="pre">_set_data</span></code> is called all traces are removed.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_figure()</span></code>, <em>the beautifier</em>:</p>
<p>You can rest now, all the work is done. <code class="docutils literal notranslate"><span class="pre">Plot</span></code> will not need to do anything here, but other subclasses like <code class="docutils literal notranslate"><span class="pre">Animation</span></code> might need to set up some things in the figure.</p>
<p>But hey, you still get the chance to give a final touch to your work with <code class="docutils literal notranslate"><span class="pre">._after_get_figure</span></code>, which is executed after the figure is built and before showing it to the world. You may want to add annotations, lines that highlight facts about your plot or whatever other thing here. By keeping it separate from the actual processing of your data, setting updates that only concern <code class="docutils literal notranslate"><span class="pre">._after_get_figure</span></code> will get executed much faster.</p>
</li>
</ul>
</div>
<div class="section" id="Accessing-settings">
<h2>Accessing settings<a class="headerlink" href="#Accessing-settings" title="Permalink to this headline">¶</a></h2>
<p>When you need to access the value of a setting inside a method, just add it as an argument.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">HappinessPlot</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>

    <span class="n">_parameters</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntegerInput</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Just a test setting&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="p">,)</span>

    <span class="k">def</span> <span class="nf">_method_that_uses_n</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_method_that_uses_n_and_provides_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-6620b19f70a9&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">class</span> HappinessPlot<span class="ansi-blue-fg">(</span>Plot<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>     _parameters = (
<span class="ansi-green-intense-fg ansi-bold">      4</span>         IntegerInput<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;n&#34;</span><span class="ansi-blue-fg">,</span> name<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;Just a test setting&#34;</span><span class="ansi-blue-fg">,</span> default<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">3</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     ,)

<span class="ansi-red-fg">NameError</span>: name &#39;Plot&#39; is not defined
</pre></div></div>
</div>
<p>Then the values will be directly provided to you and their use will be registered so that <code class="docutils literal notranslate"><span class="pre">Plot</span></code> knows what to run when a given setting is updated.</p>
<p>After some thought, this turned up to be the best way of managing settings because <strong>it allows you to use the methods even if you are not inside the plot class</strong>.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>The defaults specified in the method are ignored if the method is called within the plot instance. I.e: in <code class="docutils literal notranslate"><span class="pre">_method_that_uses_n_and_provides_default</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code> will default to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> if it’s called from the plot instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span></code> if the method is used externally.</p></li>
</ul>
</div>
<p><em>Wow, that was long…</em></p>
<p>It might seem intimidating, but rest assured that your life will be <strong>extremely easy after this</strong>. Let’s see an example of how to apply the knowledge that we acquired to our class:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">HappinessPlot</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>

    <span class="n">_plot_type</span> <span class="o">=</span> <span class="s2">&quot;Happiness Plot&quot;</span>

    <span class="n">_parameters</span> <span class="o">=</span> <span class="p">(</span>

        <span class="n">FloatInput</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;init_happiness&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Initial happiness level&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;This is your level of happiness before reading this notebook.&quot;</span><span class="p">,</span>
        <span class="p">),</span>

        <span class="n">SwitchInput</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;read_notebook&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Notebook has been read?&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Whether you have read the DIY notebook yet.&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="p">)</span>

    <span class="c1"># The _layout_defaults allow you to provide some default values</span>
    <span class="c1"># for your plot&#39;s layout (See https://plotly.com/python/creating-and-updating-figures/#the-layout-key</span>
    <span class="c1"># and https://plotly.com/python/reference/#layout)</span>
    <span class="c1"># Let&#39;s help the users understand what they are seeing with axes titles</span>
    <span class="n">_layout_defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;yaxis_title&quot;</span><span class="p">:</span> <span class="s2">&quot;Happiness level&quot;</span><span class="p">,</span>
        <span class="s2">&quot;xaxis_title&quot;</span><span class="p">:</span> <span class="s2">&quot;Time&quot;</span>
    <span class="p">}</span>

    <span class="nd">@entry_point</span><span class="p">(</span><span class="s2">&quot;Previously happy&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_init_with_happiness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_happiness</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given that you were happy enough, sets the background color pink&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">init_happiness</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Your level of happiness (</span><span class="si">{</span><span class="n">init_happiness</span><span class="si">}</span><span class="s2">) is not enough to use this entry point.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">paper_bgcolor</span><span class="o">=</span><span class="s2">&quot;pink&quot;</span><span class="p">)</span>


    <span class="nd">@entry_point</span><span class="p">(</span><span class="s2">&quot;Being sad&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_init_with_sadness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_happiness</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lets you in if you&#39;re sad, that&#39;s all.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">init_happiness</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;You are too intrinsically happy to use this entry point&quot;</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_happiness</span><span class="p">,</span> <span class="n">read_notebook</span><span class="p">):</span>
        <span class="c1"># The _set_data method needs to generate the plot elements</span>
        <span class="c1"># (in this case, a line)</span>

        <span class="c1">#Calculate the final happiness based on the settings values</span>
        <span class="k">if</span> <span class="n">read_notebook</span><span class="p">:</span>
            <span class="n">final_happiness</span> <span class="o">=</span> <span class="p">(</span><span class="n">init_happiness</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">final_happiness</span> <span class="o">=</span> <span class="n">init_happiness</span>

        <span class="c1"># Define a line that goes from the initial happiness to the final happiness</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_trace</span><span class="p">({</span>
                <span class="c1"># The type of element</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;scatter&#39;</span><span class="p">,</span>
                <span class="c1"># Draw a line</span>
                <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span>
                <span class="c1"># The values for Y (X will be automatic, we don&#39;t care now)</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">init_happiness</span><span class="p">,</span> <span class="n">final_happiness</span><span class="p">],</span>
                <span class="c1"># Name that shows in the legend</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Happiness evolution&#39;</span><span class="p">,</span>
                <span class="c1"># Other plotly fancy stuff that we don&#39;t really need</span>
                <span class="s1">&#39;hovertemplate&#39;</span><span class="p">:</span> <span class="s1">&#39;Happiness level: %</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">,</span>
                <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span> <span class="k">if</span> <span class="n">final_happiness</span> <span class="o">&lt;=</span> <span class="n">init_happiness</span> <span class="k">else</span> <span class="s2">&quot;green&quot;</span><span class="p">}</span>

        <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-a83487ca16be&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">class</span> HappinessPlot<span class="ansi-blue-fg">(</span>Plot<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>     _plot_type <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#34;Happiness Plot&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     _parameters = (

<span class="ansi-red-fg">NameError</span>: name &#39;Plot&#39; is not defined
</pre></div></div>
</div>
<p><em>And just like this, we have our first “meaningful” plot!</em></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span> <span class="o">=</span> <span class="n">HappinessPlot</span><span class="p">()</span>
<span class="n">plt</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-930491f7ed9d&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>plt <span class="ansi-blue-fg">=</span> HappinessPlot<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> plt

<span class="ansi-red-fg">NameError</span>: name &#39;HappinessPlot&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">update_settings</span><span class="p">(</span><span class="n">init_happiness</span><span class="o">=</span><span class="mi">100</span> <span class="p">,</span><span class="n">read_notebook</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-b27918f4cd64&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>plt<span class="ansi-blue-fg">.</span>update_settings<span class="ansi-blue-fg">(</span>init_happiness<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">100</span> <span class="ansi-blue-fg">,</span>read_notebook<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;plt&#39; is not defined
</pre></div></div>
</div>
<p><em>Simplicity is great, but that is too simple… let’s add more things to our plot!</em></p>
</div>
<div class="section" id="Additional-public-methods">
<h2>Additional public methods<a class="headerlink" href="#Additional-public-methods" title="Permalink to this headline">¶</a></h2>
<p>You might feel like you are always at the mercy of the <code class="docutils literal notranslate"><span class="pre">Plot</span></code> class, but that’s not completely true.<code class="docutils literal notranslate"><span class="pre">Plot</span></code> expects your class to have certain methods and automatically provides your class with useful plot manipulation methods, but <strong>you can always add methods that you think will be helpful for users that will use your particular plot</strong>.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>If you believe that a method can be useful for plots other than yours, consider contributing it to the <code class="docutils literal notranslate"><span class="pre">Plot</span></code> class :)</p>
</div>
<p>Let’s see how this could work with our happiness plot. We will add a method <code class="docutils literal notranslate"><span class="pre">read_notebook</span></code>, which simulates that we just read the notebook.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">HappinessPlot</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>

    <span class="n">_plot_type</span> <span class="o">=</span> <span class="s2">&quot;Happiness Plot&quot;</span>

    <span class="n">_parameters</span> <span class="o">=</span> <span class="p">(</span>

        <span class="n">FloatInput</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;init_happiness&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Initial happiness level&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;This is your level of happiness before reading this notebook.&quot;</span><span class="p">,</span>
        <span class="p">),</span>

        <span class="n">SwitchInput</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;read_notebook&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Notebook has been read?&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Whether you have read the DIY notebook yet.&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="p">)</span>

    <span class="n">_layout_defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;yaxis_title&quot;</span><span class="p">:</span> <span class="s2">&quot;Happiness level&quot;</span><span class="p">,</span>
        <span class="s2">&quot;xaxis_title&quot;</span><span class="p">:</span> <span class="s2">&quot;Time&quot;</span>
    <span class="p">}</span>

    <span class="nd">@entry_point</span><span class="p">(</span><span class="s2">&quot;Previously happy&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_init_with_happiness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_happiness</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given that you were happy enough, sets the background color pink&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">init_happiness</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Your level of happiness (</span><span class="si">{</span><span class="n">init_happiness</span><span class="si">}</span><span class="s2">) is not enough to use this entry point.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">paper_bgcolor</span><span class="o">=</span><span class="s2">&quot;pink&quot;</span><span class="p">)</span>


    <span class="nd">@entry_point</span><span class="p">(</span><span class="s2">&quot;Being sad&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_init_with_sadness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_happiness</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lets you in if you&#39;re sad, that&#39;s all.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">init_happiness</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;You are too intrinsically happy to use this entry point&quot;</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_happiness</span><span class="p">,</span> <span class="n">read_notebook</span><span class="p">):</span>

        <span class="c1">#Calculate the final happiness based on the settings values</span>
        <span class="k">if</span> <span class="n">read_notebook</span><span class="p">:</span>
            <span class="n">final_happiness</span> <span class="o">=</span> <span class="p">(</span><span class="n">init_happiness</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">final_happiness</span> <span class="o">=</span> <span class="n">init_happiness</span>

        <span class="c1"># Define a line that goes from the initial happiness to the final happiness</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_trace</span><span class="p">({</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;scatter&#39;</span><span class="p">,</span>
                <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">init_happiness</span><span class="p">,</span> <span class="n">final_happiness</span><span class="p">],</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Happiness evolution&#39;</span><span class="p">,</span>
                <span class="s1">&#39;hovertemplate&#39;</span><span class="p">:</span> <span class="s1">&#39;Happiness level: %</span><span class="si">{y}</span><span class="s1">&#39;</span><span class="p">,</span>
                <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span> <span class="k">if</span> <span class="n">final_happiness</span> <span class="o">&lt;=</span> <span class="n">init_happiness</span> <span class="k">else</span> <span class="s2">&quot;green&quot;</span><span class="p">}</span>

        <span class="p">})</span>

    <span class="k">def</span> <span class="nf">read_notebook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;your computer&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method that &#39;reads the notebook&#39;.&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="c1"># Let&#39;s do a little show</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reading the notebook in </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_settings</span><span class="p">(</span><span class="n">read_notebook</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Read&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-809597ed44b9&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">class</span> HappinessPlot<span class="ansi-blue-fg">(</span>Plot<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>     _plot_type <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#34;Happiness Plot&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     _parameters = (

<span class="ansi-red-fg">NameError</span>: name &#39;Plot&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span> <span class="o">=</span> <span class="n">HappinessPlot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s2">&quot;png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">read_notebook</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-a2111b4468c0&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>plt <span class="ansi-blue-fg">=</span> HappinessPlot<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> plt<span class="ansi-blue-fg">.</span>show<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;png&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> plt<span class="ansi-blue-fg">.</span>read_notebook<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;HappinessPlot&#39; is not defined
</pre></div></div>
</div>
<p><strong>Congratulations, you know everything now!</strong></p>
<p><em>Well, not really, because there are still some things missing like adding keyboard shortcuts or default animations. But yeah, you know some things…</em></p>
<p><em>Just kidding, this is more than enough to get you started! Try to build your own plots and come back for more tutorials when you feel like it. We’ll be waiting for you.</em></p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>Note that this plot class that we built here <strong>is directly usable by the</strong> <a class="reference external" href="https://github.com/pfebrer96/sislGUIpublic">graphical user interface</a>. So its use does not end in a python script.</p>
</div>
<p>Cheers, checkin’ out!</p>
<p><img alt="image0" src="https://media.giphy.com/media/A2LScHLeGzzLa/giphy.gif" /></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../../api.html" class="btn btn-neutral float-right" title="API documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../combining-plots/Intro%20to%20multiple%20plots.html" class="btn btn-neutral float-left" title="Intro to multiple plots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2015-2021, Nick Papior.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>